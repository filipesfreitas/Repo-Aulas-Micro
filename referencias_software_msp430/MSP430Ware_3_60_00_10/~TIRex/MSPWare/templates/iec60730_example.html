<html>
<head>
<title>Empty IEC60730 Project</title>

<link href="./css/main.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" >
    var PROJECT_NAME = "IEC60730_emptyProject";
</script>
<script type="text/javascript" src="../assets/js/jquery-1.10.2.js"></script>
</head>

<body>
<h1>
    <img src="./images/create_project.gif" /> Empty IEC60730 project
</h1>

<h2>
    Creates an empty IEC60730 project to start development
</h2>

<h3>
    These are the steps to import the project, use the configuration tool, build the project, and debug the project.
</h3>

<p>
<table id="Table" cellpadding="5">
    <tr>
        <td style="white-space:nowrap">Step 1:</td>
        <td style="white-space:nowrap"><a id="importProjectLink" href="#"><img src="./images/import_project.png" hspace=5 />Import the example project into CCS (Do not rename)</a></td>
    </tr>
    <tr>
        <td/>
        <td><small><i>Click on the link above to import the project. The imported project is available in the <b>Project Explorer</b> view,
        expand the project node to browse the imported source files. To modify source code, double clicks on the source file within the
        project to open the source file editor.</i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 2:</td>
        <td style="white-space:nowrap"><a id="invokeConfigTool" href="#"><img src="./images/app_launcher.png" hspace=5 width="16" />Launch The Configuration Tool</a></td>
    </tr>
    <tr>
        <td/>
        <td><small><i>Use the IEC60730 configuration tool to generate the files need for your project </i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 3:</td>
        <td style="white-space:nowrap">Rename the project (if needed)</td>
    </tr>
    <tr>
        <td/>
        <td><small><i>Now that the project is imported and the IEC60730 configuration made, you can rename the project</i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 4:</td>
        <td style="white-space:nowrap"><a id="buildProjectLink" href="liveaction:BuildProjectAction(IEC60730_emptyProject)"><img src="./images/build.png" hspace=5 />Build the imported project</a></td>
    </tr>
    <tr>
        <td />
        <td><small><i>To change build options, right click on the project and select <b>Properties</b> from the context menu. To build the project,
        select the link above, or select the <b>Build</b> toolbar button, or select the <b>Project | Build Project</b> menu item.</i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 5:</td>
        <td style="white-space:nowrap"><a id="debugConfigurationLink" href="liveaction:DebuggerConfigurationAction(IEC60730_emptyProject)"><img src="./images/connection.gif" hspace=5 />Debugger Configuration</a></td>
    </tr>
    <tr>
        <td />
        <td><small><i>Click on the link above to change the device connection. Additionally, this option is also available in the project properties.</i></small>
        </td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 6:</td>
        <td style="white-space:nowrap"><a id="debugProjectLink" href="liveaction:DebugProjectAction(IEC60730_emptyProject)"><img src="./images/debug.png" hspace=5 />Debug the imported project</a></td>
    </tr>
    <tr/>
        <tr>
        <td />
        <td><small><i>Click on the link above to launch a debug session for the <b>IEC60730_emptyProject</b> project and switch to the <b>CCS Debug Perspective</b>.
        Additionally, these are other methods to start a project debug session. Select the project in the <b>Project Explorer</b> view and click on the bug toolbar button.
        To relaunch a previous debug session, click on the small arrow beside the bug toolbar button and select one of the debug session from the history.</i></small></td>
        <td/>
    </tr>
</table>
<script src="../assets/js/bowser.min.js" ></script>
<script type="text/javascript">

    function replaceAll(find, replace, str) {
        return str.replace(new RegExp(find, 'g'), replace);
    }

    /**
     * Creates a project using a CCS projectSpec
     * @return {false} returns false so that browser does not try to follow link
     */
    $("#importProjectLink").click(function() {
        var path = window.location.pathname;
        path = path.replace("/", "");
        path = path.replace("~TIRex/MSPWare/templates/iec60730_example.html", "iec60730/examples/iec60730/emptyProject/CCS/IEC60730_emptyProject.projectSpec");
        window.location = "liveaction:CreateProjectFromSpecAction(" + path + ", IEC60730_emptyProject, MSP430F5529)";
        return false;
    });

    /**
     * Runs the configuration tool with the workspace as a parameter
     * @return {false} returns false so that browser does not try to follow link
     */
    $("#invokeConfigTool").click(function() {
        var path = window.location.pathname;
        path = path.replace("/", "");
        path = path.replace("~TIRex/MSPWare/templates/iec60730_example.html" , "iec60730/utils/MSP430_IEC60730_Config_Tool.jar");
        path = replaceAll("/", "\\", path);

        try {
            var ws = getWSLocation();
            ws = ws + 'IEC60730_emptyProject\\IEC60730\\include';
            window.location = "liveaction:RunProgramAction(javaw -jar " + path + " -dir " + ws + ")";
        } catch (err) {
            window.location = "liveaction:RunProgramAction(javaw -jar " + path + ")";
        }

        return false;
    });
</script>
</body>
</html>
