<html>
<head>
<title>Empty Grlib Project</title>

<link href="./css/main.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" >
    var PROJECT_NAME = "Empty_Project_MSP430F5xx_6xx_Grlib_Example";
</script>
<script type="text/javascript" src="../assets/js/jquery-1.10.2.js"></script>
</head>

<body>
<h1>
    <img src="./images/create_project.gif" /> Empty Grlib project
</h1>

<h2>
    Creates an empty Grlib project to start development
</h2>

<h3>
    These are the steps to import the project, use the image reformer, build the project, and debug the project.
</h3>

<p>
<table id="Table" cellpadding="5">
    <tr>
        <td style="white-space:nowrap">Step 1:</td>
        <td style="white-space:nowrap"><a id="importProjectLink" href="#"><img src="./images/import_project.png" hspace=5 />Import the example project into CCS (Do not rename)</a></td>
    </tr>
    <tr>
        <td/>
        <td><small><i>Click on the link above to import the project. The imported project is available in the <b>Project Explorer</b> view,
        expand the project node to browse the imported source files. To modify source code, double clicks on the source file within the
        project to open the source file editor.</i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 2:</td>
        <td style="white-space:nowrap"><a id="invokeImageReformer" href="#"><img src="./images/app_launcher.png" hspace=5 width="16" />Launch MSP430 Image Reformer</a></td>
    </tr>
    <tr>
        <td/>
        <td><small><i>Use the Grlib image reformer to convert images to c code usable by Grlib</i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 3:</td>
        <td style="white-space:nowrap">Rename the project (if needed)</td>
    </tr>
    <tr>
        <td/>
        <td><small><i>Now that the project and you have converted need images, you can rename the project</i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 4:</td>
        <td style="white-space:nowrap"><a id="buildProjectLink" href="liveaction:BuildProjectAction(Empty_Project_MSP430F5xx_6xx_Grlib_Example)"><img src="./images/build.png" hspace=5 />Build the imported project</a></td>
    </tr>
    <tr>
        <td />
        <td><small><i>To change build options, right click on the project and select <b>Properties</b> from the context menu. To build the project,
        select the link above, or select the <b>Build</b> toolbar button, or select the <b>Project | Build Project</b> menu item.</i></small></td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 5:</td>
        <td style="white-space:nowrap"><a id="debugConfigurationLink" href="liveaction:DebuggerConfigurationAction(Empty_Project_MSP430F5xx_6xx_Grlib_Example)"><img src="./images/connection.gif" hspace=5 />Debugger Configuration</a></td>
    </tr>
    <tr>
        <td />
        <td><small><i>Click on the link above to change the device connection. Additionally, this option is also available in the project properties.</i></small>
        </td>
        <td/>
    </tr>
    <tr>
        <td style="white-space:nowrap">Step 6:</td>
        <td style="white-space:nowrap"><a id="debugProjectLink" href="liveaction:DebugProjectAction(Empty_Project_MSP430F5xx_6xx_Grlib_Example)"><img src="./images/debug.png" hspace=5 />Debug the imported project</a></td>
    </tr>
    <tr/>
        <tr>
        <td />
        <td><small><i>Click on the link above to launch a debug session for the <b>Empty_Project_MSP430F5xx_6xx_Grlib_Example</b> project and switch to the <b>CCS Debug Perspective</b>.
        Additionally, these are other methods to start a project debug session. Select the project in the <b>Project Explorer</b> view and click on the bug toolbar button.
        To relaunch a previous debug session, click on the small arrow beside the bug toolbar button and select one of the debug session from the history.</i></small></td>
        <td/>
    </tr>
</table>
<script src="../assets/js/bowser.min.js" ></script>

<script type="text/javascript">

    /**
     * Replaces substring multiple times in a string
     * @param  {string} find    substring to look for
     * @param  {string} replace string to use for replacement
     * @param  {string} str     string to search
     * @return {string}         new string
     */
    function replaceAll(find, replace, str) {
        return str.replace(new RegExp(find, 'g'), replace);
    }

    $(document).ready(function() {

        var path = window.location.pathname;
        path = path.replace("/", "");
        path = path.replace("~TIRex/MSPWare/templates/grlib_msp430f5xx_6xx.html", "grlib/examples/Empty_Project_MSP430F5xx_6xx_Grlib_Example/CCS/Empty_Project_MSP430F5xx_6xx_Grlib_Example.projectSpec");
        path = "liveaction:CreateProjectFromSpecAction(" + path + ", Empty_Project_MSP430F5xx_6xx_Grlib_Example, MSP430F5529)";
        $("#importProjectLink").attr("href", path);
        console.log(path);

        var path = window.location.pathname;
        path = path.replace("/", "");
        script = path.replace("grlib_msp430f5xx_6xx.html", "scripts/imagereformer.bat");
        path = path.replace("~TIRex/MSPWare/templates/grlib_msp430f5xx_6xx.html" , "grlib/utils/image-reformer/imagereformer.exe");
        if(!bowser.msie) {
            script = replaceAll("/", "\\", script);
            path = replaceAll("/", "\\", path);
        }

        try {
            var ws = getWSLocation();
            ws = ws + 'Empty_Project_MSP430F5xx_6xx_Grlib_Example\\Images';
            path = "liveaction:RunProgramAction(cmd /c " + script + " " + path + " " + ws + ")";
        } catch (err) {
            script = script.replace("imagereformer_dir.bat", "imagereformer.bat");
            path = "liveaction:RunProgramAction(cmd /c " + script + " " + path + ")";
        }

        $("#invokeImageReformer").attr("href", path);
        console.log(path);
    });
</script>
</body>
</html>
